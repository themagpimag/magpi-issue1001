Catch-up TV using a Raspberry Pi – easy set-up using a Windows PCDIFFICULTY: Easy								         Geoff Harmer         Guest Writer* No need to buy a smart TV or a YouView box to get your lounge’s HD television (HDTV) to connect to catch-up TV services such as BBC iPlayer, ITV Player, 4OD and Demand 5.* No need to have the Raspberry Pi’s keyboard and mouse and their cables spoiling the look of your HDTV in your lounge.* Use a Raspberry Pi with a wifi USB dongle running OpenELEC - a compact, high performance Linux distribution that has XBMC media centre software (latest Frodo version) installed - and then hide the Raspberry Pi behind the HDTV.* Use a remote control app on your Android, iPhone or Blackberry Z10 or Q10 smartphone to control XBMC via your home’s wifi internet so you can select and play catch-up TV programmes on your HDTV.* No Linux commands are needed to install or use catch-up TV with the Raspberry Pi.My style of television watching over the last few years has switched from live viewing and recording to predominantly using catch-up TV. Catch-up TV is particularly helpful when a missed programme gets a good review the next day from friends or from TV reviews in newspapers or on the web.I am going to teach you how to install Catch-up TV using XBMC and OpenELEC distribution on a Raspberry Pi to work with your lounge’s HDTV.  It takes about 60 minutes to set up and requires no use of Linux commands either!Components permanently needed to run a catch-up TV system* Raspbery Pi Model  B (latest 512MB or initial 256MB model)* Mains power adapter for the Raspberry Pi (capable of delivering  5V and 1A21)* HDMI cable for the Raspberry Pi to connect it to an HDMI socket on your HDTV* Wifi nano USB dongle, e.g. EDIMAX EW-7811Un (150Mbps)* SDLC cardI used my old, original Raspberry Pi SDLC card of 125MB that was lying idle and it works fine but an 8GB group 10 SDLC card will work faster and costs about £7.* Android, iPhone or Blackberry Z10 or Q10 smartphone with a downloaded app to remotely control catch-up TV, e.g. XRMT for Blackberry, or Official XMBC Remote Control for Android, or Official XMBC Remote/iOS for iPhone.Important: Your home must have a wifi router that is connected to broadband internet and you must know the SSID and password for the wifi. (For example, if you use BT broadband in the UK you will have been supplied by BT with a plastic card that provides the SSID and password for wifi).Many people have found that if a Wifi nano dongle is plugged into one of the USB ports on the Raspberry Pi that the streaming of HD video stutters when trying to run a catch-up service using XBMC media centre. This is particularly true when the wifi router and the Raspberry Pi are a long distance apart.  That was the case for me with my TV downstairs with the Raspberry Pi behind it and my wifi router upstairs about five metres away through a wall and ceiling. Even a mains powered adapter with 5V, 1A2 still did not prevent a Raspberry Pi Model B (latest 512MB model) or a Raspberry Pi Model B (initial 256MB model) from stuttering. The solution was to have the wifi nano dongle plugged into a mains powered USB hub connected to the Raspberry Pi USB port.  Ideally, plug the wifi dongle closest to the mains lead of the USB hub. Sufficient power is also needed for the mains powered USB hub (5V and 0A7 worked for me). Having a 4-port mains powered USB hub is quite useful, but not essential, since you need to plug in a mouse as a temporary measure while setting up. Kit needed just to install the software for the Raspberry Pi and not needed afterwards* Windows PC or laptop connected to the Internet with an SD card reader (either internal to the PC or laptop, otherwise use a USB-connected SD card reader).* USB memory stick* Mouse - needed to access XBMC to configure everything.Outline of what we are going to do:Step 1. Plug in the wifi USB dongle into a Raspberry Pi USB port (ideally the bottom port). Use an HDMI cable to connect the Raspberry Pi to your HDTV and plug the charger into the Raspberry Pi but do not connect it to the mains yet.Step 2. Use a Windows PC to download and install the OpenELEC operating system on to an SD cardStep 3. Put the SD card into the Raspberry Pi , then power up the Raspberry Pi and configure wifi through XBMC and adjust other critical XBMC parameters, too.  Needs a mouse connected to conduct the configuration.Step 4. Use a Windows PC to download  from the web the zip files for BBC iPlayer, ITV player, 4OD and Demand5 and load these on to a USB memory stick. Step 5. Plug the USB memory stick into the other Raspberry Pi USB port and use XBMC to install the catch-up TV files.  Needs a mouse connected to configure the add-ons in XBMC for catch-up TV.Step 6. Download an XBMC remote control app onto your Android, iPhone or Blackberry Z10 or Q10 smartphone and you are ready to use catch-up TV.Let’s do it!Detailed installation instructionsStep 1. Put together the Raspberry Pi componentsPlug in the wifi USB dongle into a Raspberry Pi USB port, ideally the bottom port. Use an HDMI cable to connect the Raspberry Pi to your HDTV and plug the mains adaptor into the Raspberry Pi but do not connect it to the mains yet. Since you are going to keep the Raspberry Pi at the back of your HDTV you might also wish to use a case for the Raspberry Pi to stop dust accumulating on it.Step 2. Install OpenELEC distribution on to an SD cardYou need to format an SD card before you can install OpenELEC distribution. This is done with SD Formatter software (free). Important: If you are not using a new SD card once you format an existing SD card everything that was stored on it will be lost!You will also need Win32 Disk Imager software (free) to install OpenELEC distribution on to the SD card. You will also need to download OpenELEC distribution (free).Step 2a. Install SDFormatter software on the Windows PCUse your Windows PC to download and install SDFormatter:  https://www.sdcard.org/downloads/formatter_3/Step 2b. Install Win 32 Disk Imager software on the Windows PCUse your Windows PC to download and install Win32 Disk Imager  on your Windows PC.http://sourceforge.net/projects/win32diskimager/Step 2c. Download and install OpenELEC distribution on to SD cardDownload to your Windows PC, the latest OpenELEC image file from:http://openelec.thestateofme.comThe file to download is OpenELEC-RPi.arm-3.0.3.img.zip  or a later version. Once downloaded, unzip it giving you a filename OpenELEC-RPi.arm-3.0.3.imgInstall the OpenELEC image file on to the SD card using Win32 Disk Imager.* Open Win32Disk Imager  (Win32DiskImager.exe)* Click the browse button and select the OpenELEC-RPi.arm-3.03.img you have just downloaded and unzipped.* Check from the Device dropdown that your SD card is in the device and click the Write button and wait for the SD card to be written. On completion a Write Successful message will be displayed. (If this doesn’t work, log in as Administrator and repeat these bullet points and then it definitely will work).Step 3. Boot up the Raspberry Pi and configure the IP addressNote that for this section a mouse attached to the USB port of the Raspberry Pi or to a powered USB Hub is needed.Step 3A. Start XBMCPlug your newly written SD card into your Raspberry Pi, plug in a USB mouse and power up the Raspberry Pi and wait for OpenELEC screen to appear followed about 30 seconds later by the XBMC screen and finally the XBMC control screen known as Confluence (blue bubbles background). Tip: When in XBMC, a right mouse click on the XBMC blue bubbles background returns you to the XBMC Home screen.Step 3B. Configure the network Select  SYSTEM and then OpenELEC (below it) and then Network (top)Scroll down and set the network parameters explained here:Network Adapter  Network Technology:  WLAN  Network Interface: wlan0IP settingsThe simplest way to set up the IP address is using DHCP but a static IP address will be more reliable since it will never change and that means the remote app on your smartphone will always connect since the static IP address remains fixed whereas the IP address created using DHCP can vary depending on what other devices are connected to the broadband router.If you do not want to use a Static IP address then do not click on Static IP address and by default DHCP will be used to obtain the IP address each time the Raspberry Pi is booted. In this case Ignore the next section (Setting up a static IP address) and go to WLAN settings.Setting up a static IP addressClick on Static IP address and input an address:  the address must be in the range permitted for your broadband router but must be an unused address,   e.g. 192.168.1.11 Netmask Prefixlength: 24  (this is normally the value since the subnet mask for a home network is usually 255.255.255.0 ) Network Gateway: the IP address of your router; e.g. 192.168.1.254 DNS server 1: obtain this from your router or from your ISP using a web search: e.g. 62.6.40.162  (NB: OpenDNS provides its own free to use DNS server IP addresses: http://www.opendns.com ) DNS server 2: same approach: e.g.  217.32.171.21 DNS server 3: leave empty unless known WLAN settings WLAN SSID:  i.e. the name of your home network: e.g. BTHomeHub2-1XEB WLAN Security: Select that used by your router: usually WPA/WPA2 but otherwise, usually, WEP  WLAN Passphrase: your router’s wifi password: e.g.  2e34d6a1Click OK and then on the Confluence screen (blue bubbles background) of XBMC, select the power button (bottom left) and select Power off system. This will ensure that files on the SD card are not corrupted by powering off the Raspberry Pi.Wait for screen to go black and then unplug and replug the Raspberry Pi to reboot it.Once rebooted and the Confluence screen has appeared, go to SYSTEM and select System Info.  The IP address of the Raspberry Pi will then be shown if the wifi is working.Step 3C. Configure other critical XBMC features1. Stop RSS feeds across the bottom of the Confluence screen.   From the Confluence screen select SYSTEM then Settings and click on Appearance       Scroll down:       Show RSS news feeds: click button to turn it off       2. Allow control of XBMC remotely and locallySelect SYSTEM then Settings and click on Services then click Remote control and click buttons to:Allow program on this system to control XBMCAllow programs on other systems to control XBMC3. Ensure OpenELEC has your home workgroup.From the Confluence screen (blue bubbles background) select SYSTEM then Settings and click on SMB client and check:WINS server    WorkgroupWorkgroup is by default set to WORKGROUP but if your home network has its own workgroup name (instead of the Windows default of WORKGROUP) then you must change WORKGROUP to your home workgroup name.  You can find out your home workgroup name from your Windows PC by doing:Control PanelSystem   (scroll down to see workgroup name)Note that workgroup name is case sensitive.4. Reduce the screen size to display XBMC control buttonsSo that the Off button, Back button, Home button and time and date that are all near the edge of the Confluence screen (blue bubbles background) are fully visible.  Select SYSTEM then Settings then Appearance and under Skin change Zoom (up and down keys) to set an appropriate reduction. Around about -6% to -12% is needed depending on whether you have a wide screen or not.Step 4. Download the TV catch-up files and install these via a USB memory stick on to the SD card.Plugins need to be added to XBMC in order to use catch-up TV.Sources of the plugins are:iPlayer:		http://code.google.com/p/xbmc-iplayerv2/downloads/list ITV player:	http://code.google.com/p/xbmc-itv-player/downloads/list 4OD:		http://code.google.com/p/mossy-xbmc-repo/downloads/list Demand 5:	https://code.google.com/p/nibor-xbmc-repo/downloads/list Using your Windows PC, copy the latest zip files onto a USB memory stick. Do not unzip the files.(NB: No need to use an empty or new USB memory stick.)Step 5. Install the catch-up files to XBMC on the Raspberry PiNote: You may wish to use a mains powered USB hub to accomplish this step since on the Raspberry Pi you are using one USB port for the wifi nano dongle and another for the mouse that you must use to conduct this step.However if you temporarily remove the wifi nano dongle this step can be achieved without a USB hub.Now plug the USB memory stick into the USB port of your Raspberry Pi and power-up the Raspberry Pi.Use the XBMC Confluence screen (blue bubbles background) to install these add-ons that are on the USB stick:       Select VIDEOS then Add-ons then Click Get More…       Select  .. (i.e. two dots) and click it       Scroll down to select Install from Zip File and click it causing a new window to pop-up.Select from the window your USB memory stick and click it. If it is not visible remove it and reinsert it again.Navigate to the first add-on you wish to install and click it. It gets installed at this point within about 30-40 seconds but it is not obvious. You will be returned to the Install from Zip File menu and you may momentarily observe (bottom right of the screen) that the new Add- on has been installed.Check by returning to VIDEOS and selecting Add-ons and you should see the name of the add-on you just installed. If it is absent, wait a few minutes for it to appear and if still absent reboot your Raspberry Pi.Repeat for each add-on, one at a time.Step 6. Download and install the XBMC remote control app to your Android, iPhone or Blackberry X10 or Q10 smartphoneHere is how to install the app for the  Blackberry Z10 or Q10:On your Blackberry 10 OS (Blackberry Q10, Z10 smartphone or Blackberry Playbook) install the app XRMT.Once installed, open the app and click the three dots icon (bottom right) and select Add Server then enter the following information:Server name: openelec (lower case)Server IP address: the address that you set up for the Raspberry Pi in Step 3B Leave the 9090 (the port code)Then click the icon at bottom left.Now do a scroll down from the top of the app and click on Settings and change theAuto connect  by clicking on openelec below it.Then Close the settings screen using Close at top left.  The app is now ready to use.Once you have installed an XBMC remote app on your smartphone you are ready to control XBMC without a mouse or keyboard.Simply use the remote control app to navigate the XMBC Confluence screen (blue bubbles background) and select VIDEOS and then Add-ons. Your add-ons will be displayed. Simply click on an add-on such as iPlayer to run it. Enjoy the catch-up TV programmes.Interesting extra facts and tips* Not enough HDMI sockets on your TV? Use a “2-in and 1-out” HDMI adaptor, for example Belkin HDMI 2 In/1 Out Gold Plated Switch, so that the two inputs are: one from the Raspberry Pi and the second from something else, such as a PVR , and the output goes to the TV’s HDMI socket. Thus both the Raspberry Pi and the other device are connected to the HDTV. The Belkin product has a button on it for selecting which of the 2 inputs to currently use.  This is what I use since my HDTV only has 2 HDMI sockets and I have a DVD player and a PVR that need to use those 2 sockets.* Instead of using a nano wifi dongle, I also tried a Netgear N150 USB adaptor (150 Mbps). I plugged it in to my powered USB hub instead of the EDIMAX EW-7811Un (150Mbps). It worked immediately without any configuration.  It may also have a better aerial than a nano dongle for working at a distance from the wifi router.* If you have been using a mouse to control XBMC, you may find that your Blackberry XRMT won’t connect. Unplug the mouse and reboot the Raspberry Pi and then it will.* Want to access the OpenELEC operating system with Linux commands from your Windows PC?  Then install PuTTY on your Windows PC. PuTTY uses the SSH protocol to connect to the Raspberry Pi.  Download PuTTY to your Windows PC from: http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html .   Download putty.exe from that website.Also adjust OpenELEC  to allow SSH connection which is off by default on the latest version of OpenELEC (V3.0.3). To do this: select from the XBMC initial screen (Confluence screen (i.e blue bubbles background): PROGRAMS then OpenElec OS Settings . Then from the top menu select Services and scroll down to SSH and Start ssh server at boot and click to enable. Then reboot the Raspberry Pi.Once PuTTY is installed on your Windows PC, simply run the file putty.exe. Once the PuTTY screen is open just enter the IP address of your Raspberry Pi and when connected enter a username and password. For OpenELEC the default username is root and the default password is openelec . (2,974 words)Written and tested late May 2013 by Geoff Harmer.1 Tip: Engineers often use ‘European notation’ such as 3V3 in electrical drawings / discussion to indicate 3.3V. This ensures the decimal point is clearly marked and 3.3V is not misread as 33V.--------------------------------------------------------------------------------------------------------------1